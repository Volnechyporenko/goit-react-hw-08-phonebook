(this["webpackJsonphomework7-phonebook"]=this["webpackJsonphomework7-phonebook"]||[]).push([[0],{203:function(e,t,n){"use strict";n.r(t);var a=n(3),r=n(0),c=n.n(r),o=n(9),i=n.n(o),s=n(20),u=n(133),l=n(127),d=n(10),b=n(37),j=n(39),h=n.n(j),m=n(69),p=n(28),f=n.n(p),O=n(12);f.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var g,x,v=function(e){f.a.defaults.headers.common.Authorization="Bearer ".concat(e)},k=function(){f.a.defaults.headers.common.Authorization=""},C={register:Object(O.c)("auth/register",function(){var e=Object(m.a)(h.a.mark((function e(t){var n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.post("/users/signup",t);case 3:if(n=e.sent,(a=n.data).token){e.next=7;break}throw new Error(a);case 7:return v(a.token),e.abrupt("return",a);case 11:e.prev=11,e.t0=e.catch(0),console.log("error",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()),login:Object(O.c)("auth/login",function(){var e=Object(m.a)(h.a.mark((function e(t){var n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.post("/users/login",t);case 3:if(n=e.sent,(a=n.data).token){e.next=7;break}throw new Error(a);case 7:return v(a.token),e.abrupt("return",a);case 11:return e.prev=11,e.t0=e.catch(0),console.log("error",e.t0),e.abrupt("return",e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()),logout:Object(O.c)("auth/logout",Object(m.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.post("/users/logout");case 3:t=e.sent,t.data,k(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("error",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))),fetchRefreshUser:Object(O.c)("auth/refresh",function(){var e=Object(m.a)(h.a.mark((function e(t,n){var a,r,c,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.getState(),null!==(r=a.auth.token)){e.next=4;break}throw new Error;case 4:return v(r),e.prev=5,e.next=8,f.a.get("/users/current");case 8:return c=e.sent,o=c.data,e.abrupt("return",o);case 13:return e.prev=13,e.t0=e.catch(5),e.abrupt("return",e.t0);case 16:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t,n){return e.apply(this,arguments)}}())},w=n(246),y=n(120),S=n(239),N=n(125),W=n(241),I=n(240),E=n(87),L=n.n(E),q=n(135),D=n(236),F=n(238),T=Object(D.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),A=function(){var e=T(),t=Object(s.c)(),n=Object(r.useState)(""),c=Object(b.a)(n,2),o=c[0],i=c[1],u=Object(r.useState)(""),l=Object(b.a)(u,2),d=l[0],j=l[1],h=Object(r.useState)(""),m=Object(b.a)(h,2),p=m[0],f=m[1],O=function(e){var t=e.target,n=t.name,a=t.value;switch(n){case"name":return i(a);case"email":return j(a);case"password":return f(a);default:return}};return Object(a.jsxs)(F.a,{component:"main",maxWidth:"xs",children:[Object(a.jsx)(S.a,{}),Object(a.jsxs)("div",{className:e.paper,children:[Object(a.jsx)(w.a,{className:e.avatar,children:Object(a.jsx)(L.a,{})}),Object(a.jsx)(q.a,{component:"h1",variant:"h5",children:"Sign up"}),Object(a.jsxs)("form",{className:e.form,noValidate:!0,onSubmit:function(e){e.preventDefault(),console.log("\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0443\u0435\u043c\u0441\u044f"),(o||d||p)&&(t(C.register({name:o,email:d,password:p})),i(""),j(""),f(""))},children:[Object(a.jsx)(N.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"name",label:"Your name",name:"name",autoComplete:"name",autoFocus:!0,onChange:O}),Object(a.jsx)(N.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,onChange:O}),Object(a.jsx)(N.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:O}),Object(a.jsx)(y.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,children:"Sign up"}),Object(a.jsx)(I.a,{container:!0,children:Object(a.jsx)(I.a,{item:!0,children:Object(a.jsx)(W.a,{href:"/login",variant:"body2",children:"Already have an account? Sign in"})})})]})]})]})},R=Object(D.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),z=function(){var e=R(),t=Object(s.c)(),n=Object(r.useState)(""),c=Object(b.a)(n,2),o=c[0],i=c[1],u=Object(r.useState)(""),l=Object(b.a)(u,2),d=l[0],j=l[1],h=function(e){var t=e.target,n=t.name,a=t.value;switch(n){case"email":return i(a);case"password":return j(a);default:return}};return Object(a.jsxs)(F.a,{component:"main",maxWidth:"xs",children:[Object(a.jsx)(S.a,{}),Object(a.jsxs)("div",{className:e.paper,children:[Object(a.jsx)(w.a,{className:e.avatar,children:Object(a.jsx)(L.a,{})}),Object(a.jsx)(q.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(a.jsxs)("form",{className:e.form,noValidate:!0,onSubmit:function(e){e.preventDefault(),console.log("\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0443\u0435\u043c\u0441\u044f"),(o||d)&&(t(C.login({email:o,password:d})),i(""),j(""))},children:[Object(a.jsx)(N.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,onChange:h}),Object(a.jsx)(N.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:h}),Object(a.jsx)(y.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,children:"Sign In"}),Object(a.jsx)(I.a,{container:!0,children:Object(a.jsx)(I.a,{item:!0,children:Object(a.jsx)(W.a,{href:"/register",variant:"body2",children:"Don't have an account? Sign Up"})})})]})]})]})},P=n(245),U=n(128),B=n.n(U),V=Object(D.a)((function(e){return{form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),J=function(e){var t=e.onSubmit,n=V(),c=Object(r.useState)(""),o=Object(b.a)(c,2),i=o[0],s=o[1],u=Object(r.useState)(""),l=Object(b.a)(u,2),d=l[0],j=l[1];return Object(a.jsxs)("form",{className:n.form,noValidate:!0,onSubmit:function(e){e.preventDefault(),t({id:Object(P.a)(),name:i,number:d}),s(""),j("")},children:[Object(a.jsx)(N.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"name",label:"Name",name:"name",autoComplete:"name",autoFocus:!0,onChange:function(e){var t=e.currentTarget.value;s(t)}}),Object(a.jsx)(B.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"number",label:"Phone Number","data-cy":"user-phone",defaultCountry:"ua",value:d,onChange:function(e){console.log("phone",e);var t=e.replace("+","");j(t)}}),Object(a.jsx)(y.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:n.submit,children:"Add Contact"})]})},M=n(129),Y=n.n(M),G=n(122),H=function(e){var t=e.onChange,n=e.filter;return Object(a.jsx)(N.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,type:"text",id:"filter",label:"Find contacts by name",name:"filter",value:n,autoFocus:!0,onChange:function(e){var n=e.currentTarget.value;t(n)},InputProps:{startAdornment:Object(a.jsx)(G.a,{position:"start",children:Object(a.jsx)(Y.a,{})})}})},K=n(242),Q=n(244),X=n(243),Z=Object(D.a)({root:{minWidth:"100%"},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12}}),$=function(e){var t=e.contact,n=e.handleClick,r=Z();return Object(a.jsxs)(K.a,{className:r.root,children:[Object(a.jsxs)(X.a,{children:[Object(a.jsx)(q.a,{variant:"h5",component:"h2",children:t.name}),Object(a.jsx)(q.a,{variant:"body2",component:"p",children:t.number})]}),Object(a.jsx)(Q.a,{children:Object(a.jsx)(y.a,{size:"small",color:"primary",onClick:function(){return n(t.id)},children:"Delete"})})]})},_=function(e){var t=e.contacts,n=e.onDelete;return Object(a.jsx)("div",{children:t.map((function(e){return Object(a.jsx)($,{contact:e,handleClick:n},e.id)}))})},ee=Object(O.b)("phonebook/setFilter"),te=Object(O.b)("phonebook/fetchContactRequest"),ne=Object(O.b)("phonebook/fetchContactSuccess"),ae=Object(O.b)("phonebook/fetchContactError"),re=Object(O.b)("phonebook/addContactRequest"),ce=Object(O.b)("phonebook/addContactSuccess"),oe=Object(O.b)("phonebook/addContactError"),ie=Object(O.b)("phonebook/deleteContactRequest"),se=Object(O.b)("phonebook/deleteContactSuccess"),ue=Object(O.b)("phonebook/deleteContactError"),le=function(e){return e.phonebook.items},de=function(e){return e.phonebook.filter},be=function(e){return e.auth.isLoggedIn},je=function(e){return e.auth.user.name},he=n(130),me=n.n(he),pe=n(131),fe=n.n(pe),Oe=Object(D.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},button:{margin:e.spacing(1)}}})),ge=Object(s.b)((function(e){return{contacts:le(e),filter:de(e),userName:je(e)}}),(function(e){return{fetchContact:function(){return e((function(e){e(te()),f.a.get("/contacts").then((function(t){var n=t.data;return e(ne(n))})).catch((function(t){return e(ae(t))}))}))},addContact:function(t){return e(function(e){return function(t){t(re()),f.a.post("/contacts",e).then((function(e){var n=e.data;return t(ce(n))})).catch((function(e){return t(oe(e))}))}}(t))},setFilter:function(t){return e(ee(t))},deleteContact:function(t){return e(function(e){return function(t){t(ie()),f.a.delete("/contacts/".concat(e)).then((function(){return t(se(e))})).catch((function(e){return t(ue(e))}))}}(t))},logout:function(){return e(C.logout())}}}))((function(e){var t=e.contacts,n=e.filter,c=e.addContact,o=e.setFilter,i=e.deleteContact,s=e.fetchContact,u=e.userName,l=e.logout,d=Oe();Object(r.useEffect)((function(){s()}),[]);var b=Object(r.useMemo)((function(){return t.filter((function(e){return e.name.toLocaleLowerCase().includes(n.toLocaleLowerCase())}))}),[t,n]);return Object(a.jsxs)(F.a,{component:"main",maxWidth:"xs",children:[Object(a.jsx)(S.a,{}),Object(a.jsxs)("div",{className:d.paper,children:[Object(a.jsxs)(I.a,{container:!0,children:[Object(a.jsx)(I.a,{item:!0,xs:!0,children:Object(a.jsx)(w.a,{className:d.avatar,children:Object(a.jsx)(me.a,{})})}),Object(a.jsx)(I.a,{item:!0,children:Object(a.jsx)(y.a,{variant:"contained",color:"secondary",className:d.button,startIcon:Object(a.jsx)(fe.a,{}),onClick:l})})]}),Object(a.jsxs)(q.a,{component:"h1",variant:"h5",children:["Phonebook ",u]}),Object(a.jsx)(J,{onSubmit:function(e){t.find((function(t){return t.name===e.name}))?alert("\u0422\u0430\u043a\u043e\u0439 \u043a\u043e\u043d\u0442\u0430\u043a\u0442 \u0443\u0436\u0435 \u0435\u0441\u0442\u044c!"):c(e)}}),t.length>0&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(q.a,{component:"h2",variant:"h5",children:"Contacts"}),Object(a.jsx)(H,{onChange:o,filter:n}),b.length>0?Object(a.jsx)(_,{contacts:b,onDelete:i}):Object(a.jsx)("span",{children:"Contacts is not found"})]}),!t.length&&Object(a.jsx)("span",{children:"No contacts yet. Add contacts"})]})]})})),xe=n(61),ve=n(91),ke=function(e){var t=e.children,n=Object(ve.a)(e,["children"]),r=Object(s.d)(be);return Object(a.jsx)(d.b,Object(xe.a)(Object(xe.a)({},n),{},{children:r?t:Object(a.jsx)(d.a,{to:"/login"})}))},Ce=function(e){var t=e.children,n=e.restricted,r=void 0!==n&&n,c=Object(ve.a)(e,["children","restricted"]),o=Object(s.d)(be)&&r;return Object(a.jsx)(d.b,Object(xe.a)(Object(xe.a)({},c),{},{children:o?Object(a.jsx)(d.a,{to:"/contacts"}):t}))},we=function(){var e=Object(s.c)();return Object(r.useEffect)((function(){e(C.fetchRefreshUser())}),[e]),Object(a.jsx)("div",{children:Object(a.jsxs)(d.d,{children:[Object(a.jsx)(ke,{exact:!0,path:"/"}),Object(a.jsx)(Ce,{path:"/register",restricted:!0,children:Object(a.jsx)(A,{})}),Object(a.jsx)(Ce,{path:"/login",restricted:!0,children:Object(a.jsx)(z,{})}),Object(a.jsx)(ke,{path:"/contacts",children:Object(a.jsx)(ge,{})})]})})},ye=n(90),Se=n(40),Ne=n(132),We=n.n(Ne),Ie=n(23),Ee=n(18),Le=Object(O.d)([],(g={},Object(Ie.a)(g,ne,(function(e,t){return t.payload})),Object(Ie.a)(g,ce,(function(e,t){var n=t.payload;return[].concat(Object(ye.a)(e),[n])})),Object(Ie.a)(g,se,(function(e,t){var n=t.payload;return e.filter((function(e){return e.id!==n}))})),g)),qe=Object(O.d)("",Object(Ie.a)({},ee,(function(e,t){return t.payload}))),De=Object(Ee.c)({items:Le,filter:qe}),Fe=Object(O.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1,isError:!1},extraReducers:(x={},Object(Ie.a)(x,C.register.fulfilled,(function(e,t){var n=t.payload;e.user=n.user,e.token=n.token,e.isLoggedIn=!0})),Object(Ie.a)(x,C.login.fulfilled,(function(e,t){var n=t.payload;e.user=n.user,e.token=n.token,e.isLoggedIn=!0})),Object(Ie.a)(x,C.login.rejected,(function(e,t){var n=t.error;e.user={},e.token="",e.isLoggedIn=!1,e.isError=n})),Object(Ie.a)(x,C.logout.fulfilled,(function(e){e.user={name:null,email:null},e.token=null,e.isLoggedIn=!1})),Object(Ie.a)(x,C.fetchRefreshUser.fulfilled,(function(e,t){e.user=t.payload,e.isLoggedIn=!0})),x)}).reducer,Te=Object(ye.a)(Object(O.f)({serializableCheck:{ignoredActions:[Se.a,Se.f,Se.b,Se.c,Se.d,Se.e]}})),Ae={key:"auth",storage:We.a,whitelist:["token"]},Re=Object(O.a)({reducer:{phonebook:De,auth:Object(Se.g)(Ae,Fe)},middleware:Te,devTools:!1}),ze=Object(Se.h)(Re);i.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(s.a,{store:Re,children:Object(a.jsx)(l.a,{loading:null,persistor:ze,children:Object(a.jsx)(u.a,{children:Object(a.jsx)(we,{})})})})}),document.getElementById("root"))}},[[203,1,2]]]);
//# sourceMappingURL=main.501a17b2.chunk.js.map